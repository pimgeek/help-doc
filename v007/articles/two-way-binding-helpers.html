<!DOCTYPE html>
<html>

  <head>
  <title>Two-Way Binding Helpers</title>
  <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <meta name="description" content="© 2015 GitHub Inc. All rights reserved.
">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <link rel="stylesheet" href="/help-doc/v007/css/ui.css">
  <link rel="canonical" href="/help-doc/v007/articles/two-way-binding-helpers.html">
  <link rel="alternate" type="application/rss+xml" title="GitHub Help" href="/feed.xml" | prepend: site.baseurl | prepend: site.url }}" />
</head>


  <body class='app'>

    <div class='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-pad-12'>
        <div class='site'>
          <a href="/help-doc/v007/">
            <span class='s0'>GitHub Help</span>
            <span class='s1'>Center</span>
          </a> 
<!--
          <div class="wrapper">

            <nav class="site-nav">
              <a href="#" class="menu-icon">
                <svg viewBox="0 0 18 15">
                  <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                  <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                  <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
              </a>

              <div class="trigger">
                
                  
                  <a class="page-link" href="/help-doc/v007/about/">About</a>
                  
                
                  
                
                  
                
                  
                  <a class="page-link" href="/help-doc/v007/search/index.html">Search</a>
                  
                
                  
                
              </div>
            </nav>

          </div>
-->
        </div>
      </div>
    </div>
  </div>
</div>



    <div class='container'>
      <div class='row'>
        <div class='sidebar col-pad-3'> 
          
  
  <div class='category'>
    <div class='name'>
      <a href="/help-doc/v007/categories/guides">Guides</a>
    </div>
    <div class='articles'>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/github-flavored-markdown.html">GFM</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/why-react.html">Why React?</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/displaying-data.html">Displaying Data</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
          
          <ul>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/jsx-in-depth.html">JSX in Depth</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/jsx-spread.html">JSX Spread</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/jsx-gotchas.html">JSX Gotchas</a>
    </li>
  
</ul>

        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/interactivity-and-dynamic-uis.html">Interactivity and Dynamic UIs</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/multiple-components.html">Multiple Components</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/reusable-components.html">Reusable Components</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/transferring-props.html">Transferring Props</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/forms.html">Forms</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/working-with-the-browser.html">Working with the Browser</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
          
          <ul>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/more-about-refs.html">More About Refs</a>
    </li>
  
</ul>

        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/tooling-integration.html">Tooling Integration</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/addons.html">Addons</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
          
          <ul>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/animation.html">Animation</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/two-way-binding-helpers.html">Two-Way Binding Helpers</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/class-name-manipulation.html">Class Name Manipulation</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/test-utilities.html">Test Utilities</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/clone-with-props.html">Clone with Props</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/create-fragment.html">Create Fragment</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/immutability-helpers.html">Immutability Helpers</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/pure-render-mixin.html">Pure Render Mixin</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/performance-tools.html">Performance Tools</a>
    </li>
  
</ul>

        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/advanced-performance.html">Advanced Performance</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
    </div>
  </div>


        </div>
        <div class='main col-pad-9'>

          <!-- 注意，如果发布到 github pages 时采用了 gh-pages 方式，那么下列代码中的 /search, /js 等路径需要增加 /help-doc/v007 前缀 -->
<div id="search">
  <h2>
  <form action="/help-doc/v007/search" method="get">
    <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off">
  </form>
  </h2>
</div>
<section id="search-results" style="display: none;">
  <h3>Search results</h3>
  <div class="entries">
  </div>
</section>

<script id="search-results-template" type="text/mustache">
  {{#entries}}
    <article>
      <h3>
        <a href="{{{ site.baseurl }}}{{url}}">{{title}}</a>
      </h3>
    </article>
  {{/entries}}
</script>

<script src="/help-doc/v007/js/search.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl: '/help-doc/v007/js/index.json',   // Url for the .json file containing search index data
      results : '#search-results',  // selector for containing search results element
      entries : '.entries',         // selector for search entries containing element (contained within results above)
      template: '#search-results-template'  // selector for Mustache.js template
    });
  });
</script>


          <h1>Two-Way Binding Helpers</h1>
<p></p>

<p><code>ReactLink</code> is an easy way to express two-way binding with React.</p>

<blockquote>
  <p>Note:</p>

  <p>If you’re new to the framework, note that <code>ReactLink</code> is not needed for most applications and should be used cautiously.</p>
</blockquote>

<p>In React, data flows one way: from owner to child. This is because data only flows one direction in <a href="https://en.wikipedia.org/wiki/Von_Neumann_architecture">the Von Neumann model of computing</a>. You can think of it as “one-way data binding.”</p>

<p>However, there are lots of applications that require you to read some data and flow it back into your program. For example, when developing forms, you’ll often want to update some React <code>state</code> when you receive user input. Or perhaps you want to perform layout in JavaScript and react to changes in some DOM element size.</p>

<p>In React, you would implement this by listening to a “change” event, read from your data source (usually the DOM) and call <code>setState()</code> on one of your components. “Closing the data flow loop” explicitly leads to more understandable and easier-to-maintain programs. See <a href="/react/docs/forms.html">our forms documentation</a> for more information.</p>

<p>Two-way binding – implicitly enforcing that some value in the DOM is always consistent with some React <code>state</code> – is concise and supports a wide variety of applications. We’ve provided <code>ReactLink</code>: syntactic sugar for setting up the common data flow loop pattern described above, or “linking” some data source to React <code>state</code>.</p>

<blockquote>
  <p>Note:</p>

  <p>ReactLink is just a thin wrapper and convention around the <code>onChange</code>/<code>setState()</code> pattern. It doesn’t fundamentally change how data flows in your React application.</p>
</blockquote>

<h2 id="reactlink-before-and-after">ReactLink: Before and After</h2>

<p>Here’s a simple form example without using <code>ReactLink</code>:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span style="color:#080;font-weight:bold">var</span> NoLink = React.createClass({
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>  <span style="color:#06B;font-weight:bold">getInitialState</span>: <span style="color:#080;font-weight:bold">function</span>() {
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span style="color:#080;font-weight:bold">return</span> {<span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Hello!</span><span style="color:#710">'</span></span>};
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>  },
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  <span style="color:#06B;font-weight:bold">handleChange</span>: <span style="color:#080;font-weight:bold">function</span>(event) {
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>    <span style="color:#950">this</span>.setState({<span style="color:#606">message</span>: event.target.value});
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>  },
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>  <span style="color:#06B;font-weight:bold">render</span>: <span style="color:#080;font-weight:bold">function</span>() {
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    <span style="color:#080;font-weight:bold">var</span> message = <span style="color:#950">this</span>.state.message;
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    <span style="color:#080;font-weight:bold">return</span> <span style="color:#070;font-weight:bold">&lt;input</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">text</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="color:#F00;background-color:#FAA">{</span><span style="color:#700">message</span><span style="color:#F00;background-color:#FAA">}</span> <span style="color:#b48">onChange</span>=<span style="color:#F00;background-color:#FAA">{</span><span style="color:#700">this.handleChange</span><span style="color:#F00;background-color:#FAA">}</span> <span style="color:#070;font-weight:bold">/&gt;</span>;
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>  }
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>});
</pre></div>
</div>
</div>

<p>This works really well and it’s very clear how data is flowing, however, with a lot of form fields it could get a bit verbose. Let’s use <code>ReactLink</code> to save us some typing:</p>

<p><code>javascript{2,7}
var WithLink = React.createClass({
  mixins: [React.addons.LinkedStateMixin],
  getInitialState: function() {
    return {message: 'Hello!'};
  },
  render: function() {
    return &lt;input type="text" valueLink={this.linkState('message')} /&gt;;
  }
});
</code></p>

<p><code>LinkedStateMixin</code> adds a method to your React component called <code>linkState()</code>. <code>linkState()</code> returns a <code>ReactLink</code> object which contains the current value of the React state and a callback to change it.</p>

<p><code>ReactLink</code> objects can be passed up and down the tree as props, so it’s easy (and explicit) to set up two-way binding between a component deep in the hierarchy and state that lives higher in the hierarchy.</p>

<p>Note that checkboxes have a special behavior regarding their <code>value</code> attribute, which is the value that will be sent on form submit if the checkbox is checked (defaults to <code>on</code>). The <code>value</code> attribute is not updated when the checkbox is checked or unchecked. For checkboxes, you should use <code>checkedLink</code> instead of <code>valueLink</code>:<br />
<code>
&lt;input type="checkbox" checkedLink={this.linkState('booleanValue')} /&gt;
</code></p>

<h2 id="under-the-hood">Under the Hood</h2>

<p>There are two sides to <code>ReactLink</code>: the place where you create the <code>ReactLink</code> instance and the place where you use it. To prove how simple <code>ReactLink</code> is, let’s rewrite each side separately to be more explicit.</p>

<h3 id="reactlink-without-linkedstatemixin">ReactLink Without LinkedStateMixin</h3>

<p><code>javascript{5-7,9-12}
var WithoutMixin = React.createClass({
  getInitialState: function() {
    return {message: 'Hello!'};
  },
  handleChange: function(newValue) {
    this.setState({message: newValue});
  },
  render: function() {
    var valueLink = {
      value: this.state.message,
      requestChange: this.handleChange
    };
    return &lt;input type="text" valueLink={valueLink} /&gt;;
  }
});
</code></p>

<p>As you can see, <code>ReactLink</code> objects are very simple objects that just have a <code>value</code> and <code>requestChange</code> prop. And <code>LinkedStateMixin</code> is similarly simple: it just populates those fields with a value from <code>this.state</code> and a callback that calls <code>this.setState()</code>.</p>

<h3 id="reactlink-without-valuelink">ReactLink Without valueLink</h3>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span><span style="color:#080;font-weight:bold">var</span> WithoutLink = React.createClass({
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>  <span style="color:#606">mixins</span>: [React.addons.LinkedStateMixin],
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>  <span style="color:#06B;font-weight:bold">getInitialState</span>: <span style="color:#080;font-weight:bold">function</span>() {
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>    <span style="color:#080;font-weight:bold">return</span> {<span style="color:#606">message</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Hello!</span><span style="color:#710">'</span></span>};
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>  },
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>  <span style="color:#06B;font-weight:bold">render</span>: <span style="color:#080;font-weight:bold">function</span>() {
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    <span style="color:#080;font-weight:bold">var</span> valueLink = <span style="color:#950">this</span>.linkState(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">message</span><span style="color:#710">'</span></span>);
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>    <span style="color:#080;font-weight:bold">var</span> <span style="color:#06B;font-weight:bold">handleChange</span> = <span style="color:#080;font-weight:bold">function</span>(e) {
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>      valueLink.requestChange(e.target.value);
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>    };
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>    <span style="color:#080;font-weight:bold">return</span> <span style="color:#070;font-weight:bold">&lt;input</span> <span style="color:#b48">type</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">text</span><span style="color:#710">&quot;</span></span> <span style="color:#b48">value</span>=<span style="color:#F00;background-color:#FAA">{</span><span style="color:#700">valueLink.value</span><span style="color:#F00;background-color:#FAA">}</span> <span style="color:#b48">onChange</span>=<span style="color:#F00;background-color:#FAA">{</span><span style="color:#700">handleChange</span><span style="color:#F00;background-color:#FAA">}</span> <span style="color:#070;font-weight:bold">/&gt;</span>;
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>  }
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>});
</pre></div>
</div>
</div>

<p>The <code>valueLink</code> prop is also quite simple. It simply handles the <code>onChange</code> event and calls <code>this.props.valueLink.requestChange()</code> and also uses <code>this.props.valueLink.value</code> instead of <code>this.props.value</code>. That’s it!</p>



  
  <h2>
    prev post: <a href='/help-doc/v007/articles/animation.html'>animation.html</a>
  </h2>


  
  <h2>
    next post: <a href='/help-doc/v007/articles/class-name-manipulation.html'>class-name-manipulation.html</a>
  </h2>




        </div>

      </div>
      <div class='row'>

        <div class='team'>GitHub Help</div>
<a class='link' href='mailto:support@github.com' target='_blank'>support@github.com</a>
<div class="footer-col  footer-col-3">
  <p class="text">© 2015 GitHub Inc. All rights reserved.
</p>
</div>


      </div>
    </div>

  </body>
</html>
