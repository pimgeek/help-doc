<!DOCTYPE html>
<html>

  <head>
  <title>Working with the Browser</title>
  <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
  <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
  <meta name="description" content="React provides powerful abstractions that free you from touching the DOM directly in most cases, but sometimes you simply need to access the underlying API, ...">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <link rel="stylesheet" href="/help-doc/v007/css/ui.css">
  <link rel="canonical" href="/help-doc/v007/articles/working-with-the-browser.html">
  <link rel="alternate" type="application/rss+xml" title="GitHub Help" href="/feed.xml" | prepend: site.baseurl | prepend: site.url }}" />
</head>


  <body class='app'>

    <div class='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-pad-12'>
        <div class='site'>
          <a href="/help-doc/v007/">
            <span class='s0'>GitHub Help</span>
            <span class='s1'>Center</span>
          </a> 
<!--
          <div class="wrapper">

            <nav class="site-nav">
              <a href="#" class="menu-icon">
                <svg viewBox="0 0 18 15">
                  <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                  <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                  <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
              </a>

              <div class="trigger">
                
                  
                  <a class="page-link" href="/help-doc/v007/about/">About</a>
                  
                
                  
                
                  
                
                  
                  <a class="page-link" href="/help-doc/v007/search/index.html">Search</a>
                  
                
                  
                
              </div>
            </nav>

          </div>
-->
        </div>
      </div>
    </div>
  </div>
</div>



    <div class='container'>
      <div class='row'>
        <div class='sidebar col-pad-3'> 
          
  
  <div class='category'>
    <div class='name'>
      <a href="/help-doc/v007/categories/guides">Guides</a>
    </div>
    <div class='articles'>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/why-react.html">Why React?</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/displaying-data.html">Displaying Data</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
          
          <ul>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/jsx-in-depth.html">JSX in Depth</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/jsx-spread.html">JSX Spread</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/jsx-gotchas.html">JSX Gotchas</a>
    </li>
  
</ul>

        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/interactivity-and-dynamic-uis.html">Interactivity and Dynamic UIs</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/multiple-components.html">Multiple Components</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/reusable-components.html">Reusable Components</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/transferring-props.html">Transferring Props</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/forms.html">Forms</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/working-with-the-browser.html">Working with the Browser</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
          
          <ul>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/more-about-refs.html">More About Refs</a>
    </li>
  
</ul>

        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/tooling-integration.html">Tooling Integration</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/addons.html">Addons</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
          
          <ul>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/animation.html">Animation</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/two-way-binding-helpers.html">Two-Way Binding Helpers</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/class-name-manipulation.html">Class Name Manipulation</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/test-utilities.html">Test Utilities</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/cloning-reactelements.html">Cloning ReactElements</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/keyed-fragments.html">Keyed Fragments</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/immutability-helpers.html">Immutability Helpers</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/pure-render-mixin.html">Pure Render Mixin</a>
    </li>
  
    <li>
      <a class="post-link" href="/help-doc/v007/articles/performance-tools.html">Performance Tools</a>
    </li>
  
</ul>

        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
      <div class='article'>
        <a class="post-link" href="/help-doc/v007/articles/advanced-performance.html">Advanced Performance</a>
        <!-- 如果当前文章有下属的子文章，就顺便列出它们 -->
        
        
        <!-- 子文档列表功能 增加的代码部分结束 -->
      </div>
      
    </div>
  </div>


        </div>
        <div class='main col-pad-9'>

          <!-- 注意，如果发布到 github pages 时采用了 gh-pages 方式，那么下列代码中的 /search, /js 等路径需要增加 /help-doc/v007 前缀 -->
<div id="search">
  <h2>
  <form action="/help-doc/v007/search" method="get">
    <input type="text" id="search-query" name="q" placeholder="Search" autocomplete="off">
  </form>
  </h2>
</div>
<section id="search-results" style="display: none;">
  <h3>Search results</h3>
  <div class="entries">
  </div>
</section>

<script id="search-results-template" type="text/mustache">
  {{#entries}}
    <article>
      <h3>
        <a href="{{{ site.baseurl }}}{{url}}">{{title}}</a>
      </h3>
    </article>
  {{/entries}}
</script>

<script src="/help-doc/v007/js/search.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
  $(function() {
    $('#search-query').lunrSearch({
      indexUrl: '/help-doc/v007/js/index.json',   // Url for the .json file containing search index data
      results : '#search-results',  // selector for containing search results element
      entries : '.entries',         // selector for search entries containing element (contained within results above)
      template: '#search-results-template'  // selector for Mustache.js template
    });
  });
</script>


          <h1>Working with the Browser</h1>
<p></p>

<p>React provides powerful abstractions that free you from touching the DOM directly in most cases, but sometimes you simply need to access the underlying API, perhaps to work with a third-party library or existing code.</p>

<h2 id="the-virtual-dom">The Virtual DOM</h2>

<p>React is so fast because it never talks to the DOM directly. React maintains a fast in-memory representation of the DOM. <code>render()</code> methods return a <em>description</em> of the DOM, and React can diff this description with the in-memory representation to compute the fastest way to update the browser.</p>

<p>Additionally, React implements a full synthetic event system such that all event objects are guaranteed to conform to the W3C spec despite browser quirks, and everything bubbles consistently and efficiently across browsers. You can even use some HTML5 events in IE8!</p>

<p>Most of the time you should stay within React’s “faked browser” world since it’s more performant and easier to reason about. However, sometimes you simply need to access the underlying API, perhaps to work with a third-party library like a jQuery plugin. React provides escape hatches for you to use the underlying DOM API directly.</p>

<h2 id="refs-and-finddomnode">Refs and findDOMNode()</h2>

<p>To interact with the browser, you’ll need a reference to a DOM node. React has a <code>React.findDOMNode(component)</code> function which you can call to get a reference to the component’s DOM node.</p>

<blockquote>
  <p>Note:</p>

  <p><code>findDOMNode()</code> only works on mounted components (that is, components that have been placed in the DOM). If you try to call this on a component that has not been mounted yet (like calling <code>findDOMNode()</code> in <code>render()</code> on a component that has yet to be created) an exception will be thrown.</p>
</blockquote>

<p>In order to get a reference to a React component, you can either use <code>this</code> to get the current React component, or you can use refs to refer to a component you own. They work like this:</p>

<p>```javascript
var MyComponent = React.createClass({
  handleClick: function() {
    // Explicitly focus the text input using the raw DOM API.
    React.findDOMNode(this.refs.myTextInput).focus();
  },
  render: function() {
    // The ref attribute adds a reference to the component to
    // this.refs when the component is mounted.
    return (
      &lt;div&gt;
        <input type="text" ref="myTextInput" />
        &lt;input
          type=”button”
          value=”Focus the text input”
          onClick={this.handleClick}
        /&gt;
      &lt;/div&gt;
    );
  }
});</p>

<p>React.render(</p>
<mycomponent />
<p>,
  document.getElementById(‘example’)
);
```</p>

<h2 id="more-about-refs">More About Refs</h2>

<p>To learn more about refs, including ways to use them effectively, see our <a href="/react/docs/more-about-refs.html">more about refs</a> documentation.</p>

<h2 id="component-lifecycle">Component Lifecycle</h2>

<p>Components have three main parts of their lifecycle:</p>

<ul>
  <li><strong>Mounting:</strong> A component is being inserted into the DOM.</li>
  <li><strong>Updating:</strong> A component is being re-rendered to determine if the DOM should be updated.</li>
  <li><strong>Unmounting:</strong> A component is being removed from the DOM.</li>
</ul>

<p>React provides lifecycle methods that you can specify to hook into this process. We provide <strong>will</strong> methods, which are called right before something happens, and <strong>did</strong> methods which are called right after something happens.</p>

<h3 id="mounting">Mounting</h3>

<ul>
  <li><code>getInitialState(): object</code> is invoked before a component is mounted. Stateful components should implement this and return the initial state data.</li>
  <li><code>componentWillMount()</code> is invoked immediately before mounting occurs.</li>
  <li><code>componentDidMount()</code> is invoked immediately after mounting occurs. Initialization that requires DOM nodes should go here.</li>
</ul>

<h3 id="updating">Updating</h3>

<ul>
  <li><code>componentWillReceiveProps(object nextProps)</code> is invoked when a mounted component receives new props. This method should be used to compare <code>this.props</code> and <code>nextProps</code> to perform state transitions using <code>this.setState()</code>.</li>
  <li><code>shouldComponentUpdate(object nextProps, object nextState): boolean</code> is invoked when a component decides whether any changes warrant an update to the DOM. Implement this as an optimization to compare <code>this.props</code> with <code>nextProps</code> and <code>this.state</code> with <code>nextState</code> and return false if React should skip updating.</li>
  <li><code>componentWillUpdate(object nextProps, object nextState)</code> is invoked immediately before updating occurs. You cannot call <code>this.setState()</code> here.</li>
  <li><code>componentDidUpdate(object prevProps, object prevState)</code> is invoked immediately after updating occurs.</li>
</ul>

<h3 id="unmounting">Unmounting</h3>

<ul>
  <li><code>componentWillUnmount()</code> is invoked immediately before a component is unmounted and destroyed. Cleanup should go here.</li>
</ul>

<h3 id="mounted-methods">Mounted Methods</h3>

<p><em>Mounted</em> composite components also support the following methods:</p>

<ul>
  <li><code>findDOMNode(): DOMElement</code> can be invoked on any mounted component in order to obtain a reference to its rendered DOM node.</li>
  <li><code>forceUpdate()</code> can be invoked on any mounted component when you know that some deeper aspect of the component’s state has changed without using <code>this.setState()</code>.</li>
</ul>

<h2 id="browser-support-and-polyfills">Browser Support and Polyfills</h2>

<p>At Facebook, we support older browsers, including IE8. We’ve had polyfills in place for a long time to allow us to write forward-thinking JS. This means we don’t have a bunch of hacks scattered throughout our codebase and we can still expect our code to “just work”. For example, instead of seeing <code>+new Date()</code>, we can just write <code>Date.now()</code>. Since the open source React is the same as what we use internally, we’ve carried over this philosophy of using forward thinking JS.</p>

<p>In addition to that philosophy, we’ve also taken the stance that we, as authors of a JS library, should not be shipping polyfills as a part of our library. If every library did this, there’s a good chance you’d be sending down the same polyfill multiple times, which could be a sizable chunk of dead code. If your product needs to support older browsers, chances are you’re already using something like <a href="https://github.com/es-shims/es5-shim">es5-shim</a>.</p>

<h3 id="polyfills-needed-to-support-older-browsers">Polyfills Needed to Support Older Browsers</h3>

<p><code>es5-shim.js</code> from <a href="https://github.com/es-shims/es5-shim">kriskowal’s es5-shim</a> provides the following that React needs:</p>

<ul>
  <li><code>Array.isArray</code></li>
  <li><code>Array.prototype.every</code></li>
  <li><code>Array.prototype.forEach</code></li>
  <li><code>Array.prototype.indexOf</code></li>
  <li><code>Array.prototype.map</code></li>
  <li><code>Date.now</code></li>
  <li><code>Function.prototype.bind</code></li>
  <li><code>Object.keys</code></li>
  <li><code>String.prototype.split</code></li>
  <li><code>String.prototype.trim</code></li>
</ul>

<p><code>es5-sham.js</code>, also from <a href="https://github.com/es-shims/es5-shim">kriskowal’s es5-shim</a>, provides the following that React needs:</p>

<ul>
  <li><code>Object.create</code></li>
  <li><code>Object.freeze</code></li>
</ul>

<p>The unminified build of React needs the following from <a href="https://github.com/paulmillr/console-polyfill">paulmillr’s console-polyfill</a>.</p>

<ul>
  <li><code>console.*</code></li>
</ul>

<p>When using HTML5 elements in IE8 including <code>&lt;section&gt;</code>, <code>&lt;article&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;header&gt;</code>, and <code>&lt;footer&gt;</code>, it’s also necessary to include <a href="https://github.com/aFarkas/html5shiv">html5shiv</a> or a similar script.</p>

<h3 id="cross-browser-issues">Cross-browser Issues</h3>

<p>Although React is pretty good at abstracting browser differences, some browsers are limited or present quirky behaviors that we couldn’t find a workaround for.</p>

<h4 id="onscroll-event-on-ie8">onScroll event on IE8</h4>

<p>On IE8 the <code>onScroll</code> event doesn’t bubble and IE8 doesn’t have an API to define handlers to the capturing phase of an event, meaning there is no way for React to listen to these events.
Currently a handler to this event is ignored on IE8.</p>

<p>See the <a href="https://github.com/facebook/react/issues/631">onScroll doesn’t work in IE8</a> GitHub issue for more information.</p>

<ul>
  
</ul>




  
  <h2>
    prev post: <a href='/help-doc/v007/articles/forms.html'>forms.html</a>
  </h2>


  
  <h2>
    next post: <a href='/help-doc/v007/articles/more-about-refs.html'>more-about-refs.html</a>
  </h2>




        </div>

      </div>
      <div class='row'>

        <div class='team'>GitHub Help</div>
<a class='link' href='mailto:support@github.com' target='_blank'>support@github.com</a>
<div class="footer-col  footer-col-3">
  <p class="text">© 2015 GitHub Inc. All rights reserved.
</p>
</div>


      </div>
    </div>

  </body>
</html>
